"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.printUnusedExports = void 0;
const chalk_1 = __importDefault(require("chalk"));
const printUnusedExports = (sourceFiles) => {
    let totalCount = 0;
    const filesWithUnusedExports = sourceFiles.filter(f => {
        const unusedCount = f.moduleInfo?.unusedExports.length || 0;
        totalCount += unusedCount;
        return unusedCount;
    });
    if (filesWithUnusedExports.length > 0) {
        console.log((0, chalk_1.default) `{bgRedBright
{black {bold >> DEAD CODE DETECTED <<}}
{black >> in {bold ${filesWithUnusedExports.length}} files,}
{black >> {bold ${totalCount}} unused exports (suspected)}}
    `);
    }
    filesWithUnusedExports.forEach(file => {
        const path = file.path.split('/').map(segm => segm).join(chalk_1.default.gray('/'));
        console.log((0, chalk_1.default) `{underline ${path}}:\n {gray Unused exports:}\n ${file.moduleInfo.unusedExports.map(e => e === "default" ? chalk_1.default.bold.yellowBright(e) : chalk_1.default.yellowBright(e)).join(", ")}`);
    });
};
exports.printUnusedExports = printUnusedExports;
